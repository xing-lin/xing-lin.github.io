/* 
 * 使用 CSS @layer 定义明确的样式优先级
 * 嵌套在 Tailwind 的 components 层中，避免与 Tailwind 的 base/utilities 冲突
 * 优先级从低到高：btn-base -> btn-type -> btn-size -> btn-shape -> btn-state -> btn-danger -> btn-loading
 */

@layer components {
  @layer btn-base, btn-type, btn-size, btn-shape, btn-danger, btn-ghost,  btn-loading, btn-state;

  /* ========== Base Layer ========== */
  @layer btn-base {
    ._btn-base_ctg59_12 {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem; /* 8px */
      text-align: center;
      white-space: nowrap;
      cursor: pointer;
      user-select: none;
      transition-property: all;
      transition-duration: 200ms;
      transition-timing-function: ease-in-out;
      outline: none;
      border: 1px solid transparent;

      /* 使用 CSS 变量控制 text-shadow，默认透明（无发光） */
      --btn-text-shadow-color: transparent;
      text-shadow: 0 0 10px var(--btn-text-shadow-color);

      /* SVG filter 也使用变量控制 */
      --btn-svg-shadow-color: transparent;
    }

    ._btn-base_ctg59_12 svg {
      transition-property: all;
      transition-duration: 200ms;
      filter: drop-shadow(0 0 2px var(--btn-svg-shadow-color))
        drop-shadow(0 0 6px var(--btn-svg-shadow-color));
    }

    ._btn-base_ctg59_12:focus {
      outline: none;
    }

    ._btn-base_ctg59_12:focus-visible {
      outline: solid;
      outline-width: 2px;
      outline-offset: 2px;
      outline-color: var(--color-primary);
    }
  }

  /* ========== Type Layer ========== */
  @layer btn-type {
    ._btn-default_ctg59_56 {
      background-color: var(--color-bg-white);
      border-color: var(--color-border);
      color: var(--color-text);
    }

    ._btn-default_ctg59_56:hover {
      color: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    ._btn-default_ctg59_56:active {
      color: var(--color-primary-active);
      border-color: var(--color-primary-active);
    }

    ._btn-dashed_ctg59_72 {
      background-color: var(--color-bg-white);
      border-color: var(--color-border);
      border-style: dashed;
      color: var(--color-text);
    }

    ._btn-dashed_ctg59_72:hover {
      color: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    ._btn-dashed_ctg59_72:active {
      color: var(--color-primary-active);
      border-color: var(--color-primary-active);
    }

    ._btn-primary_ctg59_89 {
      border-color: var(--color-secondary);
      background-color: var(--color-secondary);
      color: var(--color-primary);
      /* 修改变量值来启用发光效果 */
      --btn-text-shadow-color: #034a32;
      --btn-svg-shadow-color: #034a32;
    }

    ._btn-primary_ctg59_89:hover {
      background-color: var(--color-secondary-hover);
      border-color: var(--color-secondary-hover);
      /* hover 时使用更亮的颜色 */
      --btn-text-shadow-color: #23ffb5;
      --btn-svg-shadow-color: #23ffb5;
    }

    ._btn-primary_ctg59_89:active {
      background-color: var(--color-secondary-active);
      border-color: var(--color-secondary-active);
      /* active 状态恢复为透明（无发光） */
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    ._btn-text_ctg59_114 {
      border-color: transparent;
      background-color: transparent;
      color: var(--color-text);
    }

    ._btn-text_ctg59_114:hover {
      color: var(--color-text-hover);
      background-color: var(--color-text-bg-hover);
    }

    ._btn-text_ctg59_114:active {
      color: var(--color-text-active);
      background-color: var(--color-text-bg-active);
    }

    ._btn-link_ctg59_130 {
      border-color: transparent;
      background-color: transparent;
      color: var(--color-link);
    }

    ._btn-link_ctg59_130:hover {
      color: var(--color-link-hover);
    }

    ._btn-link_ctg59_130:active {
      color: var(--color-link-active);
    }
  }

  /* ========== Size Layer ========== */
  @layer btn-size {
    ._btn-size-small_ctg59_147 {
      height: 24px;
      padding: 3px 7px;
      font-size: var(--font-size-xs);
      line-height: var(--line-height-xs);
      border-radius: 4px;
    }

    ._btn-size-middle_ctg59_155 {
      height: 32px;
      padding: 5px 15px;
      font-size: var(--font-size-sm);
      line-height: var(--line-height-sm);
      border-radius: 6px;
    }

    ._btn-size-large_ctg59_163 {
      height: 40px;
      padding: 7px 15px;
      font-size: var(--font-size-base);
      line-height: var(--line-height-base);
      border-radius: 12px;
    }
  }

  /* ========== Shape Layer ========== */
  @layer btn-shape {
    ._btn-shape-default_ctg59_174 {
      border-radius: var(--border-radius-base);
    }

    /* round: 胶囊形按钮（两端半圆，适合有文字的按钮） */
    ._btn-shape-round_ctg59_179 {
      border-radius: 9999px;
    }

    /* circle: 圆形按钮（1:1 正方形，适合纯图标按钮） */
    ._btn-shape-circle_ctg59_184 {
      border-radius: 50%;
      aspect-ratio: 1/1;
      padding: 0;
    }

    ._btn-only-icon_ctg59_190 {
      padding: 0;
      aspect-ratio: 1/1;
    }
  }

  /* ========== Danger Layer ========== */
  @layer btn-danger {
    /* danger 覆盖 default/dashed/text 样式 */
    ._btn-danger_ctg59_199 {
      background-color: var(--color-bg-white);
      border-color: var(--color-error);
      color: var(--color-error);
    }

    ._btn-danger_ctg59_199:hover {
      color: var(--color-error-hover);
      border-color: var(--color-error-hover);
    }

    ._btn-danger_ctg59_199:active {
      color: var(--color-error-active);
      border-color: var(--color-error-active);
    }

    /* danger + primary 组合（覆盖 primary 的发光效果） */
    ._btn-danger_ctg59_199._btn-primary_ctg59_89 {
      background-color: var(--color-error);
      border-color: var(--color-error);
      color: white;
      /* danger 不使用发光效果 */
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    ._btn-danger_ctg59_199._btn-primary_ctg59_89:hover {
      background-color: var(--color-error-hover);
      border-color: var(--color-error-hover);
      color: white;
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    ._btn-danger_ctg59_199._btn-primary_ctg59_89:active {
      background-color: var(--color-error-active);
      border-color: var(--color-error-active);
      color: white;
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    ._btn-danger_ctg59_199._btn-text_ctg59_114,
    ._btn-danger_ctg59_199._btn-link_ctg59_130 {
      border-color: transparent;
      background-color: transparent;
    }

    ._btn-danger_ctg59_199._btn-text_ctg59_114:hover {
      /* 就是用 --color-error-bg 作为背景色 */
      background-color: var(--color-error-bg);
    }

    ._btn-danger_ctg59_199._btn-text_ctg59_114:active {
      background-color: var(--color-error-bg-active);
    }
  }

  /* ========== Ghost Layer ========== */
  @layer btn-ghost {
    ._btn-ghost_ctg59_259 {
      /* ghost 只控制背景色为透明，不覆盖颜色和边框（让 type 层的样式继续生效） */
      color: white;
      background-color: transparent;
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    /* ghost + primary 特殊处理：保持绿色主题 */
    ._btn-ghost_ctg59_259._btn-primary_ctg59_89 {
      color: var(--color-primary);
      border-color: var(--color-primary);
    }

    ._btn-ghost_ctg59_259._btn-primary_ctg59_89:hover {
      color: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    ._btn-ghost_ctg59_259._btn-primary_ctg59_89:active {
      color: var(--color-primary-active);
      border-color: var(--color-primary-active);
    }

    ._btn-ghost_ctg59_259._btn-default_ctg59_56:hover,
    ._btn-ghost_ctg59_259._btn-dashed_ctg59_72:hover {
      color: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    ._btn-ghost_ctg59_259._btn-default_ctg59_56:active,
    ._btn-ghost_ctg59_259._btn-dashed_ctg59_72:active {
      color: var(--color-primary-active);
      border-color: var(--color-primary-active);
    }
  }

  /* ========== Loading Layer (最高优先级) ========== */
  @layer btn-loading {
    ._btn-loading_ctg59_298 {
      cursor: default;
      opacity: 0.75;
      pointer-events: none;
    }

    /* loading 状态下禁用所有交互样式 */
    ._btn-loading_ctg59_298:hover,
    ._btn-loading_ctg59_298:active {
      background-color: inherit;
      border-color: inherit;
      color: inherit;
      text-shadow: inherit;
    }

    ._btn-loading_ctg59_298:hover svg,
    ._btn-loading_ctg59_298:active svg {
      filter: inherit;
    }
  }

  /* ========== State Layer ========== */
  @layer btn-state {
    ._btn-base_ctg59_12:disabled {
      cursor: not-allowed;
      color: var(--color-text-disabled);
      border-color: var(--color-border-disabled);
      background-color: var(--color-bg-disabled);
      /* disabled 状态重置为透明（无发光） */
      --btn-text-shadow-color: transparent;
      --btn-svg-shadow-color: transparent;
    }

    ._btn-text_ctg59_114:disabled,
    ._btn-link_ctg59_130:disabled {
      color: var(--color-text-disabled);
      background-color: var(--color-text-bg-disabled);
      border-color: transparent;
    }

    ._btn-block_ctg59_338 {
      width: 100%;
    }
  }
}
