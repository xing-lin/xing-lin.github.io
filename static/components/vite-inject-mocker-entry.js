import{t as e}from"./assets/preload-helper-Dr7BywEQ.js";var t=class{registryByUrl=new Map;registryById=new Map;clear(){this.registryByUrl.clear(),this.registryById.clear()}keys(){return this.registryByUrl.keys()}add(e){this.registryByUrl.set(e.url,e),this.registryById.set(e.id,e)}register(e,t,o,s,c){let l=typeof e==`object`?e.type:e;if(typeof e==`object`){let t=e;if(t instanceof n||t instanceof r||t instanceof a||t instanceof i)throw TypeError(`[vitest] Cannot register a mock that is already defined. Expected a JSON representation from \`MockedModule.toJSON\`, instead got "${t.type}". Use "registry.add()" to update a mock instead.`);if(t.type===`automock`){let e=n.fromJSON(t);return this.add(e),e}else if(t.type===`autospy`){let e=r.fromJSON(t);return this.add(e),e}else if(t.type===`redirect`){let e=i.fromJSON(t);return this.add(e),e}else if(t.type===`manual`)throw Error("Cannot set serialized manual mock. Define a factory function manually with `ManualMockedModule.fromJSON()`.");else throw Error(`Unknown mock type: ${t.type}`)}if(typeof t!=`string`)throw TypeError(`[vitest] Mocks require a raw string.`);if(typeof s!=`string`)throw TypeError(`[vitest] Mocks require a url string.`);if(typeof o!=`string`)throw TypeError(`[vitest] Mocks require an id string.`);if(l===`manual`){if(typeof c!=`function`)throw TypeError(`[vitest] Manual mocks require a factory function.`);let e=new a(t,o,s,c);return this.add(e),e}else if(l===`automock`||l===`autospy`){let e=l===`automock`?new n(t,o,s):new r(t,o,s);return this.add(e),e}else if(l===`redirect`){if(typeof c!=`string`)throw TypeError(`[vitest] Redirect mocks require a redirect string.`);let e=new i(t,o,s,c);return this.add(e),e}else throw Error(`[vitest] Unknown mock type: ${l}`)}delete(e){this.registryByUrl.delete(e)}get(e){return this.registryByUrl.get(e)}getById(e){return this.registryById.get(e)}has(e){return this.registryByUrl.has(e)}},n=class{type=`automock`;constructor(e,t,n){this.raw=e,this.id=t,this.url=n}static fromJSON(e){return new r(e.raw,e.id,e.url)}toJSON(){return{type:this.type,url:this.url,raw:this.raw,id:this.id}}},r=class e{type=`autospy`;constructor(e,t,n){this.raw=e,this.id=t,this.url=n}static fromJSON(t){return new e(t.raw,t.id,t.url)}toJSON(){return{type:this.type,url:this.url,id:this.id,raw:this.raw}}},i=class e{type=`redirect`;constructor(e,t,n,r){this.raw=e,this.id=t,this.url=n,this.redirect=r}static fromJSON(t){return new e(t.raw,t.id,t.url,t.redirect)}toJSON(){return{type:this.type,url:this.url,raw:this.raw,id:this.id,redirect:this.redirect}}},a=class e{cache;type=`manual`;constructor(e,t,n,r){this.raw=e,this.id=t,this.url=n,this.factory=r}async resolve(){if(this.cache)return this.cache;let exports;try{exports=await this.factory()}catch(e){let t=Error(`[vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock`);throw t.cause=e,t}if(typeof exports!=`object`||!exports||Array.isArray(exports))throw TypeError(`[vitest] vi.mock("${this.raw}", factory?: () => unknown) is not returning an object. Did you mean to return an object with a "default" key?`);return this.cache=exports}static fromJSON(t,n){return new e(t.raw,t.id,t.url,n)}toJSON(){return{type:this.type,url:this.url,id:this.id,raw:this.raw}}};function o(e,t,n={}){let r=[],i=new s,a=(e,t,n)=>{try{return e[t]=n,!0}catch{return!1}},o=(t,n)=>{let s=c(t),d=s===`Module`||!!t.__esModule;for(let{key:f,descriptor:p}of u(t,d,e.globalConstructors)){if(!d&&p.get){try{Object.defineProperty(n,f,p)}catch{}continue}if(l(f,s))continue;let m=t[f],h=i.getId(m);if(h!==void 0){r.push(()=>a(n,f,i.getMockedValue(h)));continue}let g=c(m);if(Array.isArray(m)){a(n,f,[]);continue}let _=g.includes(`Function`)&&typeof m==`function`;if((!_||m._isMockFunction)&&g!==`Object`&&g!==`Module`){a(n,f,m);continue}if(!a(n,f,_?m:{}))continue;if(_){if(!e.spyOn)throw Error("[@vitest/mocker] `spyOn` is not defined. This is a Vitest error. Please open a new issue with reproduction.");let t=e.spyOn;function r(){if(this instanceof n[f])for(let{key:n,descriptor:r}of u(this,!1,e.globalConstructors)){if(r.get)continue;let e=this[n];if(c(e).includes(`Function`)&&typeof e==`function`){let e=this[n],r=t(this,n).mockImplementation(e),i=r.mockReset;r.mockRestore=r.mockReset=()=>(i.call(r),r.mockImplementation(e),r)}}}let i=t(n,f);if(e.type===`automock`){i.mockImplementation(r);let e=i.mockReset;i.mockRestore=i.mockReset=()=>(e.call(i),i.mockImplementation(r),i)}Object.defineProperty(n[f],`length`,{value:0})}i.track(m,n[f]),o(m,n[f])}},d=n;o(t,d);for(let e of r)e();return d}var s=class{idMap=new Map;mockedValueMap=new Map;getId(e){return this.idMap.get(e)}getMockedValue(e){return this.mockedValueMap.get(e)}track(e,t){let n=this.idMap.size;return this.idMap.set(e,n),this.mockedValueMap.set(n,t),n}};function c(e){return Object.prototype.toString.apply(e).slice(8,-1)}function l(e,t){return t.includes(`Function`)&&typeof e==`string`&&[`arguments`,`callee`,`caller`,`length`,`name`].includes(e)}function u(e,t,n){let{Map:r,Object:i,Function:a,RegExp:o,Array:s}=n,c=new r,l=e;do{if(l===i.prototype||l===a.prototype||l===o.prototype)break;d(l,e=>{let t=i.getOwnPropertyDescriptor(l,e);t&&c.set(e,{key:e,descriptor:t})})}while(l=i.getPrototypeOf(l));if(t&&!c.has(`default`)&&`default`in e){let t=i.getOwnPropertyDescriptor(e,`default`);t&&c.set(`default`,{key:`default`,descriptor:t})}return s.from(c.values())}function d(e,t){let n=typeof t==`function`?t:e=>t.add(e);Object.getOwnPropertyNames(e).forEach(n),Object.getOwnPropertySymbols(e).forEach(n)}var f=/^[A-Za-z]:\//;function p(e=``){return e&&e.replace(/\\/g,`/`).replace(f,e=>e.toUpperCase())}var m=/^[/\\]{2}/,h=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,g=/^[A-Za-z]:$/,_=/.(\.[^./]+|\.)$/,v=function(e){if(e.length===0)return`.`;e=p(e);let t=e.match(m),n=x(e),r=e[e.length-1]===`/`;return e=b(e,!n),e.length===0?n?`/`:r?`./`:`.`:(r&&(e+=`/`),g.test(e)&&(e+=`/`),t?n?`//${e}`:`//./${e}`:n&&!x(e)?`/${e}`:e)},y=function(...e){let t=``;for(let n of e){if(!n)continue;if(t.length>0){let e=t[t.length-1]===`/`,r=n[0]===`/`;e&&r?t+=n.slice(1):t+=e||r?n:`/${n}`}else t+=n}return v(t)};function b(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}var x=function(e){return h.test(e)},S=function(e){if(e===`..`)return``;let t=_.exec(p(e));return t&&t[1]||``},C={reset:[0,0],bold:[1,22,`\x1B[22m\x1B[1m`],dim:[2,22,`\x1B[22m\x1B[2m`],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},w=Object.entries(C);function T(e){return String(e)}T.open=``,T.close=``;function E(e=!1){let t=typeof process<`u`?process:void 0,n=t?.env||{},r=t?.argv||[];return!(`NO_COLOR`in n||r.includes(`--no-color`))&&(`FORCE_COLOR`in n||r.includes(`--color`)||t?.platform===`win32`||e&&n.TERM!==`dumb`||`CI`in n)||typeof window<`u`&&!!window.chrome}function D(e=!1){let t=E(e),n=(e,t,n,r)=>{let i=``,a=0;do i+=e.substring(a,r)+n,a=r+t.length,r=e.indexOf(t,a);while(~r);return i+e.substring(a)},r=(e,t,r=e)=>{let i=i=>{let a=String(i),o=a.indexOf(t,e.length);return~o?e+n(a,t,r,o)+t:e+a+t};return i.open=e,i.close=t,i},i={isColorSupported:t},a=e=>`\x1B[${e}m`;for(let[e,n]of w)i[e]=t?r(a(n[0]),a(n[1]),n[2]):T;return i}D();function O(e,t){return t.forEach(function(t){t&&typeof t!=`string`&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!==`default`&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}function k(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,`default`)?e.default:e}var A={exports:{}},j={},M;function N(){if(M)return j;M=1;var e=Symbol.for(`react.transitional.element`),t=Symbol.for(`react.portal`),n=Symbol.for(`react.fragment`),r=Symbol.for(`react.strict_mode`),i=Symbol.for(`react.profiler`),a=Symbol.for(`react.consumer`),o=Symbol.for(`react.context`),s=Symbol.for(`react.forward_ref`),c=Symbol.for(`react.suspense`),l=Symbol.for(`react.suspense_list`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.view_transition`),p=Symbol.for(`react.client.reference`);function m(p){if(typeof p==`object`&&p){var m=p.$$typeof;switch(m){case e:switch(p=p.type,p){case n:case i:case r:case c:case l:case f:return p;default:switch(p&&=p.$$typeof,p){case o:case s:case d:case u:return p;case a:return p;default:return m}}case t:return m}}}return j.ContextConsumer=a,j.ContextProvider=o,j.Element=e,j.ForwardRef=s,j.Fragment=n,j.Lazy=d,j.Memo=u,j.Portal=t,j.Profiler=i,j.StrictMode=r,j.Suspense=c,j.SuspenseList=l,j.isContextConsumer=function(e){return m(e)===a},j.isContextProvider=function(e){return m(e)===o},j.isElement=function(t){return typeof t==`object`&&!!t&&t.$$typeof===e},j.isForwardRef=function(e){return m(e)===s},j.isFragment=function(e){return m(e)===n},j.isLazy=function(e){return m(e)===d},j.isMemo=function(e){return m(e)===u},j.isPortal=function(e){return m(e)===t},j.isProfiler=function(e){return m(e)===i},j.isStrictMode=function(e){return m(e)===r},j.isSuspense=function(e){return m(e)===c},j.isSuspenseList=function(e){return m(e)===l},j.isValidElementType=function(e){return!!(typeof e==`string`||typeof e==`function`||e===n||e===i||e===r||e===c||e===l||typeof e==`object`&&e&&(e.$$typeof===d||e.$$typeof===u||e.$$typeof===o||e.$$typeof===a||e.$$typeof===s||e.$$typeof===p||e.getModuleId!==void 0))},j.typeOf=m,j}var P;function ee(){return P?A.exports:(P=1,A.exports=N(),A.exports)}var F=ee(),te=O({__proto__:null,default:k(F)},[F]),I={exports:{}},L={},R;function ne(){if(R)return L;R=1;var e=Symbol.for(`react.element`),t=Symbol.for(`react.portal`),n=Symbol.for(`react.fragment`),r=Symbol.for(`react.strict_mode`),i=Symbol.for(`react.profiler`),a=Symbol.for(`react.provider`),o=Symbol.for(`react.context`),s=Symbol.for(`react.server_context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.suspense_list`),d=Symbol.for(`react.memo`),f=Symbol.for(`react.lazy`),p=Symbol.for(`react.offscreen`),m=Symbol.for(`react.module.reference`);function h(p){if(typeof p==`object`&&p){var m=p.$$typeof;switch(m){case e:switch(p=p.type,p){case n:case i:case r:case l:case u:return p;default:switch(p&&=p.$$typeof,p){case s:case o:case c:case f:case d:case a:return p;default:return m}}case t:return m}}}return L.ContextConsumer=o,L.ContextProvider=a,L.Element=e,L.ForwardRef=c,L.Fragment=n,L.Lazy=f,L.Memo=d,L.Portal=t,L.Profiler=i,L.StrictMode=r,L.Suspense=l,L.SuspenseList=u,L.isAsyncMode=function(){return!1},L.isConcurrentMode=function(){return!1},L.isContextConsumer=function(e){return h(e)===o},L.isContextProvider=function(e){return h(e)===a},L.isElement=function(t){return typeof t==`object`&&!!t&&t.$$typeof===e},L.isForwardRef=function(e){return h(e)===c},L.isFragment=function(e){return h(e)===n},L.isLazy=function(e){return h(e)===f},L.isMemo=function(e){return h(e)===d},L.isPortal=function(e){return h(e)===t},L.isProfiler=function(e){return h(e)===i},L.isStrictMode=function(e){return h(e)===r},L.isSuspense=function(e){return h(e)===l},L.isSuspenseList=function(e){return h(e)===u},L.isValidElementType=function(e){return!!(typeof e==`string`||typeof e==`function`||e===n||e===i||e===r||e===l||e===u||e===p||typeof e==`object`&&e&&(e.$$typeof===f||e.$$typeof===d||e.$$typeof===a||e.$$typeof===o||e.$$typeof===c||e.$$typeof===m||e.getModuleId!==void 0))},L.typeOf=h,L}var z;function re(){return z?I.exports:(z=1,I.exports=ne(),I.exports)}var B=re(),ie=O({__proto__:null,default:k(B)},[B]);Object.fromEntries([`isAsyncMode`,`isConcurrentMode`,`isContextConsumer`,`isContextProvider`,`isElement`,`isForwardRef`,`isFragment`,`isLazy`,`isMemo`,`isPortal`,`isProfiler`,`isStrictMode`,`isSuspense`,`isSuspenseList`,`isValidElementType`].map(e=>[e,t=>ie[e](t)||te[e](t)]));try{let{getPromiseDetails:e,kPending:t,kRejected:n}=process.binding(`util`);Array.isArray(e(Promise.resolve()))}catch{}function ae(e){let{message:t=`$$stack trace error`,stackTraceLimit:n=1}=e||{},r=Error.stackTraceLimit,i=Error.prepareStackTrace;Error.stackTraceLimit=n,Error.prepareStackTrace=e=>e.stack;let a=Error(t).stack||``;return Error.prepareStackTrace=i,Error.stackTraceLimit=r,a}var V,H;function oe(){if(H)return V;H=1;var e,t,n,r,i,a,o,s,c,l,u,d,f=/\/(?![*\/])(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\\]).|\\.)*(\/[$_\u200C\u200D\p{ID_Continue}]*|\\)?/uy,p,m,h,g,_,v;return d=/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![\/*]))=?|[?~,:;[\](){}]/y,e=/(\x23?)(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/uy,m=/(['"])(?:(?!\1)[^\\\n\r]|\\(?:\r\n|[^]))*(\1)?/y,u=/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/y,h=/[`}](?:[^`\\$]|\\[^]|\$(?!\{))*(`|\$\{)?/y,v=/[\t\v\f\ufeff\p{Zs}]+/uy,s=/\r?\n|[\r\u2028\u2029]/y,c=/\/\*(?:[^*]|\*(?!\/))*(\*\/)?/y,p=/\/\/.*/y,n=/[<>.:={}]|\/(?![\/*])/y,t=/[$_\p{ID_Start}][$_\u200C\u200D\p{ID_Continue}-]*/uy,r=/(['"])(?:(?!\1)[^])*(\1)?/y,i=/[^<>{}]+/y,_=/^(?:[\/+-]|\.{3}|\?(?:InterpolationIn(?:JSX|Template)|NoLineTerminatorHere|NonExpressionParenEnd|UnaryIncDec))?$|[{}([,;<>=*%&|^!~?:]$/,g=/^(?:=>|[;\]){}]|else|\?(?:NoLineTerminatorHere|NonExpressionParenEnd))?$/,a=/^(?:await|case|default|delete|do|else|instanceof|new|return|throw|typeof|void|yield)$/,o=/^(?:return|throw|yield)$/,l=RegExp(s.source),V=function*(y,{jsx:b=!1}={}){var x,S,C,w,T,E,D,O,k,A,j,M,N,P;for({length:E}=y,w=0,T=``,P=[{tag:`JS`}],x=[],j=0,M=!1;w<E;){switch(O=P[P.length-1],O.tag){case`JS`:case`JSNonExpressionParen`:case`InterpolationInTemplate`:case`InterpolationInJSX`:if(y[w]===`/`&&(_.test(T)||a.test(T))&&(f.lastIndex=w,D=f.exec(y))){w=f.lastIndex,T=D[0],M=!0,yield{type:`RegularExpressionLiteral`,value:D[0],closed:D[1]!==void 0&&D[1]!==`\\`};continue}if(d.lastIndex=w,D=d.exec(y)){switch(N=D[0],k=d.lastIndex,A=N,N){case`(`:T===`?NonExpressionParenKeyword`&&P.push({tag:`JSNonExpressionParen`,nesting:j}),j++,M=!1;break;case`)`:j--,M=!0,O.tag===`JSNonExpressionParen`&&j===O.nesting&&(P.pop(),A=`?NonExpressionParenEnd`,M=!1);break;case`{`:d.lastIndex=0,C=!g.test(T)&&(_.test(T)||a.test(T)),x.push(C),M=!1;break;case`}`:switch(O.tag){case`InterpolationInTemplate`:if(x.length===O.nesting){h.lastIndex=w,D=h.exec(y),w=h.lastIndex,T=D[0],D[1]==="${"?(T=`?InterpolationInTemplate`,M=!1,yield{type:`TemplateMiddle`,value:D[0]}):(P.pop(),M=!0,yield{type:`TemplateTail`,value:D[0],closed:D[1]==="`"});continue}break;case`InterpolationInJSX`:if(x.length===O.nesting){P.pop(),w+=1,T=`}`,yield{type:`JSXPunctuator`,value:`}`};continue}}M=x.pop(),A=M?`?ExpressionBraceEnd`:`}`;break;case`]`:M=!0;break;case`++`:case`--`:A=M?`?PostfixIncDec`:`?UnaryIncDec`;break;case`<`:if(b&&(_.test(T)||a.test(T))){P.push({tag:`JSXTag`}),w+=1,T=`<`,yield{type:`JSXPunctuator`,value:N};continue}M=!1;break;default:M=!1}w=k,T=A,yield{type:`Punctuator`,value:N};continue}if(e.lastIndex=w,D=e.exec(y)){switch(w=e.lastIndex,A=D[0],D[0]){case`for`:case`if`:case`while`:case`with`:T!==`.`&&T!==`?.`&&(A=`?NonExpressionParenKeyword`)}T=A,M=!a.test(D[0]),yield{type:D[1]===`#`?`PrivateIdentifier`:`IdentifierName`,value:D[0]};continue}if(m.lastIndex=w,D=m.exec(y)){w=m.lastIndex,T=D[0],M=!0,yield{type:`StringLiteral`,value:D[0],closed:D[2]!==void 0};continue}if(u.lastIndex=w,D=u.exec(y)){w=u.lastIndex,T=D[0],M=!0,yield{type:`NumericLiteral`,value:D[0]};continue}if(h.lastIndex=w,D=h.exec(y)){w=h.lastIndex,T=D[0],D[1]==="${"?(T=`?InterpolationInTemplate`,P.push({tag:`InterpolationInTemplate`,nesting:x.length}),M=!1,yield{type:`TemplateHead`,value:D[0]}):(M=!0,yield{type:`NoSubstitutionTemplate`,value:D[0],closed:D[1]==="`"});continue}break;case`JSXTag`:case`JSXTagEnd`:if(n.lastIndex=w,D=n.exec(y)){switch(w=n.lastIndex,A=D[0],D[0]){case`<`:P.push({tag:`JSXTag`});break;case`>`:P.pop(),T===`/`||O.tag===`JSXTagEnd`?(A=`?JSX`,M=!0):P.push({tag:`JSXChildren`});break;case`{`:P.push({tag:`InterpolationInJSX`,nesting:x.length}),A=`?InterpolationInJSX`,M=!1;break;case`/`:T===`<`&&(P.pop(),P[P.length-1].tag===`JSXChildren`&&P.pop(),P.push({tag:`JSXTagEnd`}))}T=A,yield{type:`JSXPunctuator`,value:D[0]};continue}if(t.lastIndex=w,D=t.exec(y)){w=t.lastIndex,T=D[0],yield{type:`JSXIdentifier`,value:D[0]};continue}if(r.lastIndex=w,D=r.exec(y)){w=r.lastIndex,T=D[0],yield{type:`JSXString`,value:D[0],closed:D[2]!==void 0};continue}break;case`JSXChildren`:if(i.lastIndex=w,D=i.exec(y)){w=i.lastIndex,T=D[0],yield{type:`JSXText`,value:D[0]};continue}switch(y[w]){case`<`:P.push({tag:`JSXTag`}),w++,T=`<`,yield{type:`JSXPunctuator`,value:`<`};continue;case`{`:P.push({tag:`InterpolationInJSX`,nesting:x.length}),w++,T=`?InterpolationInJSX`,M=!1,yield{type:`JSXPunctuator`,value:`{`};continue}}if(v.lastIndex=w,D=v.exec(y)){w=v.lastIndex,yield{type:`WhiteSpace`,value:D[0]};continue}if(s.lastIndex=w,D=s.exec(y)){w=s.lastIndex,M=!1,o.test(T)&&(T=`?NoLineTerminatorHere`),yield{type:`LineTerminatorSequence`,value:D[0]};continue}if(c.lastIndex=w,D=c.exec(y)){w=c.lastIndex,l.test(D[0])&&(M=!1,o.test(T)&&(T=`?NoLineTerminatorHere`)),yield{type:`MultiLineComment`,value:D[0],closed:D[1]!==void 0};continue}if(p.lastIndex=w,D=p.exec(y)){w=p.lastIndex,M=!1,yield{type:`SingleLineComment`,value:D[0]};continue}S=String.fromCodePoint(y.codePointAt(w)),w+=S.length,T=S,M=!1,yield{type:O.tag.startsWith(`JSX`)?`JSXInvalid`:`Invalid`,value:S}}},V}oe();var U={keyword:`break.case.catch.continue.debugger.default.do.else.finally.for.function.if.return.switch.throw.try.var.const.while.with.new.this.super.class.extends.export.import.null.true.false.in.instanceof.typeof.void.delete`.split(`.`),strict:[`implements`,`interface`,`let`,`package`,`private`,`protected`,`public`,`static`,`yield`]};new Set(U.keyword),new Set(U.strict);var se=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,ce=new Uint8Array(64),W=new Uint8Array(128);for(let e=0;e<64;e++){let t=se.charCodeAt(e);ce[e]=t,W[t]=e}var le;(function(e){e[e.Empty=1]=`Empty`,e[e.Hash=2]=`Hash`,e[e.Query=3]=`Query`,e[e.RelativePath=4]=`RelativePath`,e[e.AbsolutePath=5]=`AbsolutePath`,e[e.SchemeRelative=6]=`SchemeRelative`,e[e.Absolute=7]=`Absolute`})(le||={});var ue=/^[A-Za-z]:\//;function de(e=``){return e&&e.replace(/\\/g,`/`).replace(ue,e=>e.toUpperCase())}var G=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/;function fe(){return typeof process<`u`&&typeof process.cwd==`function`?process.cwd().replace(/\\/g,`/`):`/`}var pe=function(...e){e=e.map(e=>de(e));let t=``,n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let i=r>=0?e[r]:fe();!i||i.length===0||(t=`${i}/${t}`,n=K(i))}return t=me(t,!n),n&&!K(t)?`/${t}`:t.length>0?t:`.`};function me(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}var K=function(e){return G.test(e)},q=/^\s*at .*(?:\S:\d+|\(native\))/m,he=/^(?:eval@)?(?:\[native code\])?$/;function J(e){if(!e.includes(`:`))return[e];let t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/^\(|\)$/g,``));if(!t)return[e];let n=t[1];if(n.startsWith(`async `)&&(n=n.slice(6)),n.startsWith(`http:`)||n.startsWith(`https:`)){let e=new URL(n);e.searchParams.delete(`import`),e.searchParams.delete(`browserv`),n=e.pathname+e.hash+e.search}if(n.startsWith(`/@fs/`)){let e=/^\/@fs\/[a-zA-Z]:\//.test(n);n=n.slice(e?5:4)}return[n,t[2]||void 0,t[3]||void 0]}function ge(e){let t=e.trim();if(he.test(t)||(t.includes(` > eval`)&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,`:$1`)),!t.includes(`@`)&&!t.includes(`:`)))return null;let n=/((.*".+"[^@]*)?[^@]*)(@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,[a,o,s]=J(t.replace(n,``));return!a||!o||!s?null:{file:a,method:i||``,line:Number.parseInt(o),column:Number.parseInt(s)}}function _e(e){let t=e.trim();return q.test(t)?ve(t):ge(t)}function ve(e){let t=e.trim();if(!q.test(t))return null;t.includes(`(eval `)&&(t=t.replace(/eval code/g,`eval`).replace(/(\(eval at [^()]*)|(,.*$)/g,``));let n=t.replace(/^\s+/,``).replace(/\(eval code/g,`(`).replace(/^.*?\s+/,``),r=n.match(/ (\(.+\)$)/);n=r?n.replace(r[0],``):n;let[i,a,o]=J(r?r[1]:n),s=r&&n||``,c=i&&[`eval`,`<anonymous>`].includes(i)?void 0:i;return!c||!a||!o?null:(s.startsWith(`async `)&&(s=s.slice(6)),c.startsWith(`file://`)&&(c=c.slice(7)),c=c.startsWith(`node:`)||c.startsWith(`internal:`)?c:pe(c),s&&=s.replace(/__vite_ssr_import_\d+__\./g,``),{method:s,file:c,line:Number.parseInt(a),column:Number.parseInt(o)})}function ye(e){let t=e?.globalThisKey||`__vitest_mocker__`;function n(){return globalThis[t]===void 0?new Proxy({},{get(e,t){throw Error(`Vitest mocker was not initialized in this environment. vi.${String(t)}() is forbidden.`)}}):globalThis[t]}return{hoisted(e){if(typeof e!=`function`)throw TypeError(`vi.hoisted() expects a function, but received a ${typeof e}`);return e()},mock(e,t){if(typeof e!=`string`)throw TypeError(`vi.mock() expects a string path, but received a ${typeof e}`);let r=Y(`mock`);n().queueMock(e,r,typeof t==`function`?()=>t(()=>n().importActual(e,r)):t)},unmock(e){if(typeof e!=`string`)throw TypeError(`vi.unmock() expects a string path, but received a ${typeof e}`);n().queueUnmock(e,Y(`unmock`))},doMock(e,t){if(typeof e!=`string`)throw TypeError(`vi.doMock() expects a string path, but received a ${typeof e}`);let r=Y(`doMock`);n().queueMock(e,r,typeof t==`function`?()=>t(()=>n().importActual(e,r)):t)},doUnmock(e){if(typeof e!=`string`)throw TypeError(`vi.doUnmock() expects a string path, but received a ${typeof e}`);n().queueUnmock(e,Y(`doUnmock`))},async importActual(e){return n().importActual(e,Y(`importActual`))},async importMock(e){return n().importMock(e,Y(`importMock`))}}}function Y(e){let t=ae({stackTraceLimit:5}).split(`
`),n=t.findIndex(t=>t.includes(` at Object.${e}`)||t.includes(`${e}@`));return _e(t[n+1])?.file||``}var{now:X}=Date,be=class{registry=new t;queue=new Set;mockedIds=new Set;constructor(e,t,n,r){this.interceptor=e,this.rpc=t,this.spyOn=n,this.config=r}async prepare(){this.queue.size&&await Promise.all([...this.queue.values()])}async resolveFactoryModule(e){let t=this.registry.get(e);if(!t||t.type!==`manual`)throw Error(`Mock ${e} wasn't registered. This is probably a Vitest error. Please, open a new issue with reproduction.`);return await t.resolve()}getFactoryModule(e){let t=this.registry.get(e);if(!t||t.type!==`manual`)throw Error(`Mock ${e} wasn't registered. This is probably a Vitest error. Please, open a new issue with reproduction.`);if(!t.cache)throw Error(`Mock ${e} wasn't resolved. This is probably a Vitest error. Please, open a new issue with reproduction.`);return t.cache}async invalidate(){let e=Array.from(this.mockedIds);e.length&&(await this.rpc.invalidate(e),await this.interceptor.invalidate(),this.registry.clear())}async importActual(t,n){let r=await this.rpc.resolveId(t,n);if(r==null)throw Error(`[vitest] Cannot resolve "${t}" imported from "${n}"`);let i=S(r.id),a=new URL(r.url,location.href),o=`_vitest_original&ext${i}`,s=`${a.pathname}${a.search?`${a.search}&${o}`:`?${o}`}${a.hash}`;return this.wrapDynamicImport(()=>e(()=>import(s),[],import.meta.url)).then(e=>{if(!r.optimized||e.default===void 0)return e;let t=e.default;return t?.__esModule?t:{...typeof t==`object`&&!Array.isArray(t)||typeof t==`function`?t:{},default:t}})}async importMock(t,r){await this.prepare();let{resolvedId:a,resolvedUrl:o,redirectUrl:s}=await this.rpc.resolveMock(t,r,{mock:`auto`}),c=this.resolveMockPath(Z(o)),l=this.registry.get(c);if(!l)if(s){let e=new URL(this.resolveMockPath(Z(s)),location.href).toString();l=new i(t,a,c,e)}else l=new n(t,a,c);if(l.type===`manual`)return await l.resolve();if(l.type===`automock`||l.type===`autospy`){let t=new URL(`/@id/${a}`,location.href),n=t.search?`${t.search}&t=${X()}`:`?t=${X()}`,r=await e(()=>import(`${t.pathname}${n}&mock=${l.type}${t.hash}`),[],import.meta.url);return this.mockObject(r,l.type)}return e(()=>import(l.redirect),[],import.meta.url)}mockObject(e,t=`automock`){return o({globalConstructors:{Object,Function,Array,Map,RegExp},spyOn:this.spyOn,type:t},e)}queueMock(e,t,n){let r=this.rpc.resolveMock(e,t,{mock:typeof n==`function`?`factory`:n?.spy?`spy`:`auto`}).then(async({redirectUrl:t,resolvedId:r,resolvedUrl:i,needsInterop:a,mockType:o})=>{let s=this.resolveMockPath(Z(i));this.mockedIds.add(r);let c=typeof n==`function`?async()=>{let e=await n();return a?{default:e}:e}:void 0,l=typeof t==`string`?new URL(this.resolveMockPath(Z(t)),location.href).toString():null,u;u=o===`manual`?this.registry.register(`manual`,e,r,s,c):o===`autospy`?this.registry.register(`autospy`,e,r,s):o===`redirect`?this.registry.register(`redirect`,e,r,s,l):this.registry.register(`automock`,e,r,s),await this.interceptor.register(u)}).finally(()=>{this.queue.delete(r)});this.queue.add(r)}queueUnmock(e,t){let n=this.rpc.resolveId(e,t).then(async e=>{if(!e)return;let t=this.resolveMockPath(Z(e.url));this.mockedIds.add(e.id),this.registry.delete(t),await this.interceptor.delete(t)}).finally(()=>{this.queue.delete(n)});this.queue.add(n)}wrapDynamicImport(e){return typeof e==`function`?new Promise((t,n)=>{this.prepare().finally(()=>{e().then(t,n)})}):e}resolveMockPath(e){let t=this.config,n=y(`/@fs/`,t.root);return e.startsWith(t.root)?e.slice(t.root.length):e.startsWith(n)?e.slice(n.length):e}},xe=/(\?|&)v=\w{8}/;function Z(e){return e.replace(xe,``)}var Q=class{mocks=new t;constructor(){}async register(e){this.mocks.add(e)}async delete(e){this.mocks.delete(e)}async invalidate(){this.mocks.clear()}},$=e=>{switch(e){case`resolveId`:return Promise.resolve({id:``,url:``,optimized:!1});case`resolveMock`:return Promise.resolve({mockType:`dummy`,resolvedId:``,resolvedUrl:``,redirectUrl:``,needsInterop:!1});case`invalidate`:return Promise.resolve()}},Se=class extends be{queueMock(){}};function Ce(e){let t=new Se(e(`__vitest_mocker__`),{resolveId(e,t){return $(`resolveId`,{id:e,importer:t})},resolveMock(e,t,n){return $(`resolveMock`,{id:e,importer:t,options:n})},async invalidate(e){return $(`invalidate`,{ids:e})}},(...e)=>globalThis.__STORYBOOK_MODULE_TEST__.spyOn(...e),{root:``});return globalThis.__vitest_mocker__=t,ye({globalThisKey:`__vitest_mocker__`})}globalThis.__STORYBOOK_MOCKER__=Ce(()=>new Q);export{Q as ModuleMockerInterceptor};